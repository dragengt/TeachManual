#Chapter5. 循环：计数器下的一百次连击

##1. 说说“当”

在开始我们的“正业”——打击勇者之前，让我们先来唱一首家喻户晓的歌：

>当山峰没有棱角的时候……
当河水不再流……
……
然后怎么样怎么样。

其实，“当……”就蕴含着一个朴素的思想：

> 当 （条件满足的时候）
那么--> 做点什么

就比如说：只要音乐还在播放，小明就跳舞。

这就是循环的意思：当音乐还在继续，小明就不断地执行“跳舞”这个动作。

当然，细想一下，歌词里的“当”更应该是表达了“即使……也……”的意思，而不应该是我们这里的“当……就……”，不然的话，歌词就变味了。之所以会衍生出这么多的意思，大概是因为中文实在是博大精深。

所以，需要提前声明一下，下面开始描述的“while”，应该是“当……就……”的意思。

##2. 当、当、当……while循坏

回到我们的正题上：如何重复地打击勇者，而不用手动复制几十次的TakeDamage（）调用。

要实现这个目标，我们就要想清楚用于描述这个行为的过程，这样才能写出合理的语句让计算机听得懂。

一般地，我们会给出这么一段话，来描述我们打击勇者的过程：

```

1. 如果 （勇者还没Game Over），则：
{
	2. 打击勇者（）；
	3. 回到第1步；
}

4. 输出：游戏结束了~

```
按照这个流程而走，只要勇者还没死亡，那么程序就会不断地执行1、2、3步，然后又回到1、2、3步。

当然，只要勇者血量低于0了，那么第1步过后由于条件不满足，就会运行到第4步，也就是……游戏，结束了。

在早期的程序中，确实存在这么样的类似于if 和 goto的句法以实现循环的功能。但是，在js里面，这样的句法太过晦涩，而换用了“while”语句以实现我们的需求。while跟if的语句何其相似：

```js

while( 条件 )
{
	执行某些事情( );
}

```

这里的while，其实可以理解为“当条件满足时，那么就执行该部分内的语句，直到条件不再满足为止”。

所以，正题来了，只要hp大于0，那么，勇者就会遭受命运的摧残：


```js

var heroHP = 100;
while( heroHP > 0)
{
	heroHP = heroHP - 10;
	console.log(  "一天过去，勇者失去了10点生命值……剩下HP: "+heroHP  );
}

console.log( " 游戏……结束了。 ");

```

在上面的代码中，可以很容易理解while循环：当勇者的血量大于0的时候，那么他会度过一天，并失去10点生命值，直到10天后他的血量终于变成了0，自此while循环的条件不再被满足，循环不会被执行，所以会执行while后面的一句，游戏结束。

实际上，while就是游戏程序，甚至是任一软件背后的主体部分，比如游戏中通常会有这么样的代码结构：

```
某些数据的初始化，如游戏状态等；
装载内容；

while( 游戏还没结束)
{
	获取用户输入；
	处理游戏角色，处理对应的许多事件；
}

输出游戏结束；
清理数据；

```

同理，在软件中，则是：
```
程序初始化，如连接网络、读取文件；

while( 程序状态正常 )
{
	获取输入，比如鼠标点击事件；
	处理事件；
}

清理数据，断开网络等，程序退出；

```

话说回来，现在我们已经知道了如何实现“当勇者还活着的时候，不断地打击勇者”，那么，假如我们突然“心慈手软”，只想打击勇者10次，每次都调用之前的TakeDamage( )，看看勇者有没有可能活下来，怎么办？

其实很好解决这一类“循环N次”的问题，只要一个能记住次数的变量即可，而while里面的条件自然是当计数器counter 小于等于10时执行循环体：

```js
//先声明TakeDamage，勇者的HP：
var heroHP = 100;
function TakeDamage( )
{
	//同之前，略
}

//声明一个在一边计数的变量，注意一定是在while外面声明，而不是在while里面声明，为什么？
var counter = 1;

//当计数器<=10时，即说明还没攻击完勇者。
while( counter <= 10)
{
	//输出对勇者的打击：
	console.log("第"+counter+"次打击勇者，勇者掉血！");

	//勇者受伤：
	TakeDamage( );


	//计数器加1：
	counter ++;
}

console.log("好了……不虐勇者了，可以放他走了。");

```

其实……只要你细心，你就会发现上面的代码与持续不断杀死勇者的那段代码并没有本质上的区别：都是用一个变量去控制循环的次数。实际上，很多代码都会用到这样的形式的循环：
```
1.初始语句：声明 计数器，以控制循环的次数；

2.循环条件：
while( 计数器达到某个条件 )
{
 	//执行代码；

 	3.每一轮循环完后的动作：
	计数器+1；
}

```

由于这样的情况满大街都会出现，所以，一种新的循环形式就应运而生了，我们可以将之称为——for循环。


##3. 你是谁，for了谁，我的兄弟for循环~


for循环是江湖上一个没什么神秘的“帮派”，如果说有，也就是要睁大眼睛注意for语句中的分号了：

```

for( 初始语句; 循环条件; 每一轮循环完成后的动作)		//注意哟，这里有两个分号
{
	//执行代码；
}

```

看出来了没，其实就是把三句最常用的话写到了for语句里，而且——划重点的地方来了——三条语句是用两个分号隔开的，因为这里是*三句话，三句话，真的是三句话*！这三句话支撑了循环界的半壁江山，而且作用还各不相同，让我们暂时撇开勇者，来看看“循环体”的世界：

 - 初始语句：这是for循环的带头大哥了，很多循环的初始条件，比如设置计数器为0，或者1，都会在这里声明，而且只会在for循环开始的时候*执行一次*，其实相当于把初始语句写在for语句前面——当然你非要这么做，那也是没人管你的。
 
 - 循环条件：这个就厉害了，每次循环开始前，都会检查一次循环条件，如果满足条件，则循环继续，否则，略过循环。
 
 - 每轮循环完成后动作：看看这位兄弟的名字就知道，他做的是每轮循环后的收尾工作，当然，如果你不喜欢它……那就……回去用你的while循环吧！



//TODO:
边界条件、死循环、中断、一百次连击